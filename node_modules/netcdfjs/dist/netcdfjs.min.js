!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.netcdfjs=e():t.netcdfjs=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){"use strict";function n(t){t.offset%4!=0&&t.skip(4-t.offset%4)}t.exports.notNetcdf=function(t,e){if(t)throw new TypeError("Not a valid NetCDF v3.x file: ".concat(e))},t.exports.padding=n,t.exports.readName=function(t){var e=t.readUint32(),r=t.readChars(e);return n(t),r}},function(t,e,r){!function(t){var e,r,n,i=String.fromCharCode;function s(t){for(var e,r,n=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function a(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function o(t,e){return i(t>>e&63|128)}function f(t){if(0==(4294967168&t))return i(t);var e="";return 0==(4294965248&t)?e=i(t>>6&31|192):0==(4294901760&t)?(a(t),e=i(t>>12&15|224),e+=o(t,6)):0==(4292870144&t)&&(e=i(t>>18&7|240),e+=o(t,12),e+=o(t,6)),e+=i(63&t|128)}function u(){if(n>=r)throw Error("Invalid byte index");var t=255&e[n];if(n++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function h(){var t,i;if(n>r)throw Error("Invalid byte index");if(n==r)return!1;if(t=255&e[n],n++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|u())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|u()<<6|u())>=2048)return a(i),i;throw Error("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|u()<<12|u()<<6|u())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}t.version="3.0.0",t.encode=function(t){for(var e=s(t),r=e.length,n=-1,i="";++n<r;)i+=f(e[n]);return i},t.decode=function(t){e=s(t),r=e.length,n=0;for(var a,o=[];!1!==(a=h());)o.push(a);return function(t){for(var e,r=t.length,n=-1,s="";++n<r;)(e=t[n])>65535&&(s+=i((e-=65536)>>>10&1023|55296),e=56320|1023&e),s+=i(e);return s}(o)}}(e)},function(t,e,r){"use strict";const n=r(0).notNetcdf,i={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function s(t,e){if(1!==t){for(var r=new Array(t),n=0;n<t;n++)r[n]=e();return r}return e()}t.exports=i,t.exports.num2str=function(t){switch(Number(t)){case i.BYTE:return"byte";case i.CHAR:return"char";case i.SHORT:return"short";case i.INT:return"int";case i.FLOAT:return"float";case i.DOUBLE:return"double";default:return"undefined"}},t.exports.num2bytes=function(t){switch(Number(t)){case i.BYTE:case i.CHAR:return 1;case i.SHORT:return 2;case i.INT:case i.FLOAT:return 4;case i.DOUBLE:return 8;default:return-1}},t.exports.str2num=function(t){switch(String(t)){case"byte":return i.BYTE;case"char":return i.CHAR;case"short":return i.SHORT;case"int":return i.INT;case"float":return i.FLOAT;case"double":return i.DOUBLE;default:return-1}},t.exports.readType=function(t,e,r){switch(e){case i.BYTE:return t.readBytes(r);case i.CHAR:return 0===(a=t.readChars(r)).charCodeAt(a.length-1)?a.substring(0,a.length-1):a;case i.SHORT:return s(r,t.readInt16.bind(t));case i.INT:return s(r,t.readInt32.bind(t));case i.FLOAT:return s(r,t.readFloat32.bind(t));case i.DOUBLE:return s(r,t.readFloat64.bind(t));default:return void n(!0,"non valid type ".concat(e))}var a}},function(t,e,r){"use strict";const{IOBuffer:n}=r(4),i=r(0),s=r(5),a=r(6),o=r(7);t.exports=class{constructor(t){const e=new n(t);e.setBigEndian(),i.notNetcdf("CDF"!==e.readChars(3),"should start with CDF");const r=e.readByte();i.notNetcdf(r>2,"unknown version"),this.header=a(e,r),this.buffer=e}get version(){return 1===this.header.version?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(t){const e=this.globalAttributes.find(e=>e.name===t);return e?e.value:null}getDataVariableAsString(t){const e=this.getDataVariable(t);return e?e.join(""):null}get variables(){return this.header.variables}toString(){return o.call(this)}getDataVariable(t){let e;return e="string"==typeof t?this.header.variables.find(function(e){return e.name===t}):t,i.notNetcdf(void 0===e,"variable not found: ".concat(t)),this.buffer.seek(e.offset),e.record?s.record(this.buffer,e,this.header.recordDimension):s.nonRecord(this.buffer,e)}dataVariableExists(t){return void 0!==this.header.variables.find(function(e){return e.name===t})}attributeExists(t){return void 0!==this.globalAttributes.find(e=>e.name===t)}}},function(t,e,r){"use strict";r.r(e),r.d(e,"IOBuffer",function(){return s});var n=r(1);const i=8192;class s{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const n=e.offset?e.offset>>>0:0,a=t.byteLength-n;let o=n;(ArrayBuffer.isView(t)||t instanceof s)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+n),t=t.buffer),this.lastWrittenByte=r?a:0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(t)){const e=2*(this.offset+t),r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=new Uint8Array(t);for(let r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="";for(let r=0;r<t;r++)e+=this.readChar();return e}readUtf8(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=this.readChars(t);return Object(n.decode)(e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){const e=Object(n.encode)(t);return this.writeChars(e)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},function(t,e,r){"use strict";const n=r(2);t.exports.nonRecord=function(t,e){const r=n.str2num(e.type);for(var i=e.size/n.num2bytes(r),s=new Array(i),a=0;a<i;a++)s[a]=n.readType(t,r,1);return s},t.exports.record=function(t,e,r){const i=n.str2num(e.type),s=e.size?e.size/n.num2bytes(i):1;var a=r.length,o=new Array(a);const f=r.recordStep;for(var u=0;u<a;u++){var h=t.offset;o[u]=n.readType(t,i,s),t.seek(h+f)}return o}},function(t,e,r){"use strict";const n=r(0),i=r(2),s=0,a=10,o=11,f=12;const u=0;function h(t){const e=t.readUint32();if(e===s)return n.notNetcdf(t.readUint32()!==s,"wrong empty tag for list of attributes"),[];{n.notNetcdf(e!==f,"wrong tag for list of attributes");const s=t.readUint32();for(var r=new Array(s),a=0;a<s;a++){var o=n.readName(t),u=t.readUint32();n.notNetcdf(u<1||u>6,"non valid type ".concat(u));var h=t.readUint32(),d=i.readType(t,u,h);n.padding(t),r[a]={name:o,type:i.num2str(u),value:d}}}return r}t.exports=function(t,e){var r={recordDimension:{length:t.readUint32()}};r.version=e;var f=function(t){var e,r;const i=t.readUint32();if(i===s)return n.notNetcdf(t.readUint32()!==s,"wrong empty tag for list of dimensions"),[];{n.notNetcdf(i!==a,"wrong tag for list of dimensions");const s=t.readUint32();for(var o=new Array(s),f=0;f<s;f++){var h=n.readName(t);const i=t.readUint32();i===u&&(e=f,r=h),o[f]={name:h,size:i}}}return{dimensions:o,recordId:e,recordName:r}}(t);r.recordDimension.id=f.recordId,r.recordDimension.name=f.recordName,r.dimensions=f.dimensions,r.globalAttributes=h(t);var d=function(t,e,r){const a=t.readUint32();var f=0;if(a===s)return n.notNetcdf(t.readUint32()!==s,"wrong empty tag for list of variables"),[];{n.notNetcdf(a!==o,"wrong tag for list of variables");const s=t.readUint32();for(var u=new Array(s),d=0;d<s;d++){var l=n.readName(t);const s=t.readUint32();for(var c=new Array(s),b=0;b<s;b++)c[b]=t.readUint32();var p=h(t),v=t.readUint32();n.notNetcdf(v<1&&v>6,"non valid type ".concat(v));const a=t.readUint32();var g=t.readUint32();2===r&&(n.notNetcdf(g>0,"offsets larger than 4GB not supported"),g=t.readUint32());let o=!1;void 0!==e&&c[0]===e&&(f+=a,o=!0),u[d]={name:l,dimensions:c,attributes:p,type:i.num2str(v),size:a,offset:g,record:o}}}return{variables:u,recordStep:f}}(t,f.recordId,e);return r.variables=d.variables,r.recordDimension.recordStep=d.recordStep,r}},function(t,e,r){"use strict";t.exports=function(){let t=[];t.push("DIMENSIONS");for(let e of this.dimensions)t.push("  ".concat(e.name.padEnd(30)," = size: ").concat(e.size));t.push(""),t.push("GLOBAL ATTRIBUTES");for(let e of this.globalAttributes)t.push("  ".concat(e.name.padEnd(30)," = ").concat(e.value));let e=JSON.parse(JSON.stringify(this.variables));t.push(""),t.push("VARIABLES:");for(let r of e){r.value=this.getDataVariable(r);let e=JSON.stringify(r.value);e.length>50&&(e=e.substring(0,50)),isNaN(r.value.length)||(e+=" (length: ".concat(r.value.length,")")),t.push("  ".concat(r.name.padEnd(30)," = ").concat(e))}return t.join("\n")}}])});
//# sourceMappingURL=netcdfjs.min.js.map